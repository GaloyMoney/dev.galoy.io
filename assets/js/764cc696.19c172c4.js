"use strict";(self.webpackChunkdev_galoy_io=self.webpackChunkdev_galoy_io||[]).push([[542],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>y});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=s(n),d=r,y=p["".concat(c,".").concat(d)]||p[d]||m[d]||l;return n?a.createElement(y,o(o({ref:t},u),{},{components:n})):a.createElement(y,o({ref:t},u))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[p]="string"==typeof e?e:r,o[1]=i;for(var s=2;s<l;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4746:(e,t,n)=>{n.d(t,{H:()=>o,a:()=>l});var a=n(7294);const r=(0,a.createContext)(),l=()=>(0,a.useContext)(r),o=e=>{let{children:t}=e;const[n,l]=(0,a.useState)(null),o={authToken:n,setAuthToken:l};return a.createElement(r.Provider,{value:o},t)}},9090:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294),r=n(7900),l=n(4746);const o=function(){const{authToken:e,setAuthToken:t}=(0,l.a)(),[n,o]=(0,a.useState)("https://api.staging.galoy.io/graphql"),[i,c]=(0,a.useState)(""),[s,u]=(0,a.useState)(1e3),[p,m]=(0,a.useState)(""),[d,y]=(0,a.useState)(""),[h,v]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),[E,w]=(0,a.useState)(""),[b,S]=(0,a.useState)(""),[x,C]=(0,a.useState)(null),[P,T]=(0,a.useState)(null),[O,k]=(0,a.useState)(null),[L,I]=(0,a.useState)(null),[q,j]=(0,a.useState)(null),[B,R]=(0,a.useState)(null),[D,A]=(0,a.useState)(null),[N,$]=(0,a.useState)(null),G="  query Me {\n    me {\n      defaultAccount {\n        wallets {\n          id\n          walletCurrency\n          balance\n        }\n      }\n    }\n  }",U="mutation LnInvoiceCreate($input: LnInvoiceCreateInput!) {\n  lnInvoiceCreate(input: $input) {\n    invoice {\n      paymentRequest\n      paymentHash\n      paymentSecret\n      satoshis\n    }\n    errors {\n      message\n    }\n  }\n}",X=(e,t)=>U,_="mutation lnInvoiceFeeProbe($input: LnInvoiceFeeProbeInput!) {\n  lnInvoiceFeeProbe(input: $input) {\n    errors {\n      message\n    }\n    amount\n  }\n}",J=(e,t)=>_,K="mutation LnInvoicePaymentSend($input: LnInvoicePaymentInput!) {\n  lnInvoicePaymentSend(input: $input) {\n    status\n    errors {\n      message\n      path\n      code\n    }\n  }\n}",M=(e,t)=>K,Q=function(t,a,r,l){void 0===r&&(r=""),void 0===l&&(l="");let o={query:t.trim(),variables:{}};const i=e?`--header 'Authorization: Bearer ${e}'`:"--header 'Authorization: Bearer <YOUR_AUTH_TOKEN_HERE>'";"invoice"===a?o.variables.input={amount:s.toString(),walletId:p}:"feeProbe"===a?o.variables.input={paymentRequest:r,walletId:p}:"lnInvoicePaymentSend"===a&&(o.variables.input={paymentRequest:r,walletId:l});let c=JSON.stringify(o).replace(/\n/g,"");const u=`curl --request POST --header 'content-type: application/json' \\\n    ${i} \\\n    --url '${n}' \\\n    --data '${c}'`;"wallet"===a?v(`curl -sS --request POST --header 'content-type: application/json' \\\n    ${i} \\\n    --url '${n}' \\\n    --data '{"query":"query me { me { defaultAccount { wallets { id walletCurrency }}}}", "variables":{}}' \\\n | jq '.data.me.defaultAccount.wallets[] | select(.walletCurrency == "BTC") .id'`):"invoice"===a?f(u):"feeProbe"===a?w(u):"lnInvoicePaymentSend"===a&&S(u)};(0,a.useEffect)((()=>{Q(G,"wallet")}),[e,n]),(0,a.useEffect)((()=>{const e=X();Q(e,"invoice")}),[e,n,s,p]),(0,a.useEffect)((()=>{const e=J();Q(e,"feeProbe",d,p)}),[e,n,d,p]),(0,a.useEffect)((()=>{const e=M();Q(e,"lnInvoicePaymentSend",d,p)}),[e,n,d,p]);const H=e=>{m(e.target.value)};function F(e){let{value:t,onChange:n,onSet:r}=e;return a.createElement("div",null,a.createElement("input",{type:"text",placeholder:"Paste and set the authentication token",value:t,onChange:n,style:{width:"50%",marginBottom:"10px"}}),a.createElement("div",null,a.createElement("button",{onClick:r},"Set token")))}const Z=a.createElement(F,{value:i,onChange:e=>{c(e.target.value)},onSet:()=>{t(i)}});return a.createElement("div",null,"The GraphQL endpoint to connect to:",a.createElement("input",{type:"text",value:n,onChange:e=>{o(e.target.value)},style:{width:"100%",marginBottom:"10px"}}),a.createElement("div",null,"The following methods require a valid auth token set in the header as a bearer token:"),Z,a.createElement("div",{style:{marginTop:"20px"}}),a.createElement("h3",null,"Get the wallet IDs and balances"),a.createElement("div",null,"The body of the GraphQL query:"),a.createElement("pre",{style:{marginLeft:"10px"}},G),a.createElement("button",{onClick:async()=>{try{const t=await(0,r.K)(e,n,G);C(t);const a=t?.me?.defaultAccount?.wallets?.find((e=>"BTC"===e.walletCurrency));a?.id&&m(a.id),Q(G,"wallet")}catch(t){j(t.message)}}},"Get the wallet IDs"),q&&a.createElement("div",{style:{color:"red"}},"Error: ",q),x&&a.createElement("div",null,a.createElement("strong",null,"Response:")," ",a.createElement("pre",{style:{marginLeft:"10px"}},JSON.stringify(x,null,2))),a.createElement("div",{style:{marginTop:"20px",marginBottom:"40px"}},a.createElement("h4",null,"cURL command to get the BTC wallet ID:"),a.createElement("pre",{style:{backgroundColor:"auto",padding:"10px",marginLeft:"10px",overflowX:"auto",whiteSpace:"pre-wrap"}},h)),a.createElement("h3",null,"Generate an invoice"),a.createElement("div",null,a.createElement("div",null," Set the variables:"),a.createElement("div",null,a.createElement("label",null,a.createElement("div",null,"Amount (sats):"),a.createElement("input",{type:"number",value:s,onChange:e=>{u(e.target.value)},style:{marginLeft:"10px",width:"50%"}}))),a.createElement("label",null,a.createElement("div",null,"BTC wallet ID:"),a.createElement("input",{type:"text",value:p,onChange:H,style:{marginLeft:"10px",width:"50%"},placeholder:"Paste the BTC wallet ID from the response above"}))),a.createElement("div",null,"The body of the GraphQL query:"),a.createElement("pre",{style:{marginLeft:"10px"}},U),a.createElement("button",{onClick:async()=>{const t=X(),a={input:{amount:s.toString(),walletId:p}};try{const l=await(0,r.K)(e,n,t,a);T(l),Q(t,"invoice")}catch(l){R(l.message)}}},"Create invoice"),B&&a.createElement("div",{style:{color:"red"}},"Error: ",B),P&&a.createElement("div",null,a.createElement("strong",null,"Response:")," ",a.createElement("pre",{style:{marginLeft:"10px"}},JSON.stringify(P,null,2))),a.createElement("div",{style:{marginTop:"20px",marginBottom:"40px"}},a.createElement("h4",null,"cURL command to generate an invoice:"),a.createElement("pre",{style:{backgroundColor:"auto",padding:"10px",marginLeft:"10px",overflowX:"auto",whiteSpace:"pre-wrap"}},g)),a.createElement("h3",null,"Probe invoice fee"),a.createElement("div",null,a.createElement("div",null," Set the variables:"),a.createElement("div",null,a.createElement("label",null,a.createElement("div",null,"Payment Request:"),a.createElement("input",{type:"text",value:d,onChange:e=>y(e.target.value),style:{marginLeft:"10px",width:"50%"},placeholder:"Paste an invoice"}))),a.createElement("label",null,a.createElement("div",null,"BTC wallet ID:"),a.createElement("input",{type:"text",value:p,onChange:H,style:{marginLeft:"10px",width:"50%"},placeholder:"Paste the BTC wallet ID from the response above"}))),a.createElement("div",null,"The body of the GraphQL query:"),a.createElement("pre",{style:{marginLeft:"10px"}},_),a.createElement("button",{onClick:async()=>{const t=J(),a={input:{paymentRequest:d,walletId:p}};try{const l=await(0,r.K)(e,n,t,a);k(l),Q(t,"feeProbe",d,p)}catch(l){A(l.message)}}},"Probe fee"),D&&a.createElement("div",{style:{color:"red"}},"Error: ",D),O&&a.createElement("div",null,a.createElement("strong",null,"Response:")," ",a.createElement("pre",{style:{marginLeft:"10px"}},JSON.stringify(O,null,2))),a.createElement("div",{style:{marginTop:"20px",marginBottom:"40px"}},a.createElement("h4",null,"cURL command to probe invoice fee:"),a.createElement("pre",{style:{backgroundColor:"auto",padding:"10px",marginLeft:"10px",overflowX:"auto",whiteSpace:"pre-wrap"}},E)),a.createElement("h3",null,"Pay an invoice"),a.createElement("div",null,a.createElement("div",null," Set the variables:"),a.createElement("div",null,a.createElement("label",null,a.createElement("div",null,"Payment Request:"),a.createElement("input",{type:"text",value:d,onChange:e=>y(e.target.value),style:{marginLeft:"10px",marginRight:"20px"},placeholder:"Paste an invoice"}))),a.createElement("label",null,a.createElement("div",null,"BTC wallet ID:"),a.createElement("input",{type:"text",value:p,onChange:H,style:{marginLeft:"10px",width:"50%"},placeholder:"Paste the BTC wallet ID from the response above"}))),a.createElement("div",null,"The body of the GraphQL query:"),a.createElement("pre",{style:{marginLeft:"10px"}},K),a.createElement("button",{onClick:async()=>{const t=M(),a={input:{paymentRequest:d,walletId:p}};try{const l=await(0,r.K)(e,n,t,a);I(l),Q(t,"lnInvoicePaymentSend",d,p)}catch(l){$(l.message)}}},"Send payment"),N&&a.createElement("div",{style:{color:"red"}},"Error: ",N),L&&a.createElement("div",null,a.createElement("strong",null,"Response:")," ",a.createElement("pre",{style:{marginLeft:"10px"}},JSON.stringify(L,null,2))),a.createElement("div",{style:{marginTop:"20px"}},a.createElement("h4",null,"cURL command to pay an invoice:"),a.createElement("pre",{style:{backgroundColor:"auto",padding:"10px",marginLeft:"10px",overflowX:"auto",whiteSpace:"pre-wrap"}},b)))}},7900:(e,t,n)=>{n.d(t,{K:()=>a});const a=async function(e,t,n,a){if(void 0===a&&(a={}),!e)throw new Error("Not authenticated");if(!n)throw new Error("No GraphQL query provided");try{const r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`bearer ${e}`},body:JSON.stringify({query:n,variables:a})});if(!r.ok){const e=await r.text();throw new Error(`Error response from server: ${e}`)}const l=r.headers.get("content-type");if(l&&l.includes("application/json")){return await r.json()}throw new Error(`Unexpected content type: ${l}`)}catch(r){throw console.error("There was an error making the authenticated request:",r),r}}},6717:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>y,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=n(7462),r=(n(7294),n(3905)),l=n(4746),o=n(9090);const i={id:"api-sats",title:"Send satoshis over lightning",slug:"/api/sats"},c=void 0,s={unversionedId:"api/api-sats",id:"api/api-sats",title:"Send satoshis over lightning",description:"By default the calls are directed to the staging environment by default where the funds are worthless, using the default bitcoin signet.",source:"@site/docs/api/c-sats.md",sourceDirName:"api",slug:"/api/sats",permalink:"/api/sats",draft:!1,tags:[],version:"current",frontMatter:{id:"api-sats",title:"Send satoshis over lightning",slug:"/api/sats"},sidebar:"apiSidebar",previous:{title:"Send stablesats over lightning",permalink:"/api/stablesats"},next:{title:"Learn more",permalink:"/api/learn-more"}},u={},p=[],m={toc:p},d="wrapper";function y(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"By default the calls are directed to the staging environment by default where the funds are worthless, using the default bitcoin ",(0,r.kt)("a",{parentName:"p",href:"/deployment/signet"},"signet"),".")),(0,r.kt)(l.H,{mdxType:"AuthProvider"},(0,r.kt)(o.Z,{mdxType:"AuthRequestBtcButton"})))}y.isMDXComponent=!0}}]);