"use strict";(self.webpackChunkdev_galoy_io=self.webpackChunkdev_galoy_io||[]).push([[389],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>v});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,c=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=s(n),d=r,v=p["".concat(c,".").concat(d)]||p[d]||m[d]||l;return n?a.createElement(v,o(o({ref:t},u),{},{components:n})):a.createElement(v,o({ref:t},u))}));function v(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[p]="string"==typeof e?e:r,o[1]=i;for(var s=2;s<l;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4746:(e,t,n)=>{n.d(t,{H:()=>o,a:()=>l});var a=n(7294);const r=(0,a.createContext)(),l=()=>(0,a.useContext)(r),o=e=>{let{children:t}=e;const[n,l]=(0,a.useState)(null),o={authToken:n,setAuthToken:l};return a.createElement(r.Provider,{value:o},t)}},5690:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294),r=n(7900),l=n(4746);const o=function(){const{authToken:e,setAuthToken:t}=(0,l.a)(),[n,o]=(0,a.useState)("https://api.staging.galoy.io/graphql"),[i,c]=(0,a.useState)(""),[s,u]=(0,a.useState)(100),[p,m]=(0,a.useState)(""),[d,v]=(0,a.useState)(""),[h,y]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),[E,b]=(0,a.useState)(""),[w,S]=(0,a.useState)(""),[x,P]=(0,a.useState)(null),[T,C]=(0,a.useState)(null),[k,O]=(0,a.useState)(null),[L,I]=(0,a.useState)(null),[D,U]=(0,a.useState)(null),[q,j]=(0,a.useState)(null),[R,A]=(0,a.useState)(null),[N,$]=(0,a.useState)(null),B="  query Me {\n    me {\n      defaultAccount {\n        wallets {\n          id\n          walletCurrency\n          balance\n        }\n      }\n    }\n  }",G="mutation lnUsdInvoiceCreate($input: LnUsdInvoiceCreateInput!) {\n  lnUsdInvoiceCreate(input: $input) {\n    invoice {\n      paymentRequest\n      paymentHash\n      paymentSecret\n      satoshis\n    }\n    errors {\n      message\n    }\n  }\n}",X=(e,t)=>G,_="mutation lnUsdInvoiceFeeProbe($input: LnUsdInvoiceFeeProbeInput!) {\n  lnUsdInvoiceFeeProbe(input: $input) {\n    errors {\n      message\n    }\n    amount\n  }\n}",J=(e,t)=>_,K="mutation LnInvoicePaymentSend($input: LnInvoicePaymentInput!) {\n  lnInvoicePaymentSend(input: $input) {\n    status\n    errors {\n      message\n      path\n      code\n    }\n  }\n}",M=(e,t)=>K,Q=function(t,a,r,l){void 0===r&&(r=""),void 0===l&&(l="");let o={query:t.trim(),variables:{}};const i=e?`--header 'Authorization: Bearer ${e}'`:"--header 'Authorization: Bearer <YOUR_AUTH_TOKEN_HERE>'";"invoice"===a?o.variables.input={amount:s.toString(),walletId:p}:"feeProbe"===a?o.variables.input={paymentRequest:r,walletId:p}:"lnInvoicePaymentSend"===a&&(o.variables.input={paymentRequest:r,walletId:l});let c=JSON.stringify(o).replace(/\n/g,"");const u=`curl --request POST --header 'content-type: application/json' \\\n    ${i} \\\n    --url '${n}' \\\n    --data '${c}'`;"wallet"===a?y(`curl -sS --request POST --header 'content-type: application/json' \\\n    ${i} \\\n    --url '${n}' \\\n    --data '{"query":"query me { me { defaultAccount { wallets { id walletCurrency }}}}", "variables":{}}' \\\n | jq '.data.me.defaultAccount.wallets[] | select(.walletCurrency == "USD") .id'`):"invoice"===a?f(u):"feeProbe"===a?b(u):"lnInvoicePaymentSend"===a&&S(u)};(0,a.useEffect)((()=>{Q(B,"wallet")}),[e,n]),(0,a.useEffect)((()=>{const e=X();Q(e,"invoice")}),[e,n,s,p]),(0,a.useEffect)((()=>{const e=J();Q(e,"feeProbe",d,p)}),[e,n,d,p]),(0,a.useEffect)((()=>{const e=M();Q(e,"lnInvoicePaymentSend",d,p)}),[e,n,d,p]);const H=e=>{m(e.target.value)};function F(e){let{value:t,onChange:n,onSet:r}=e;return a.createElement("div",null,a.createElement("input",{type:"text",placeholder:"Paste and set the authentication token",value:t,onChange:n,style:{width:"50%",marginBottom:"10px"}}),a.createElement("div",null,a.createElement("button",{onClick:r},"Set token")))}const Z=a.createElement(F,{value:i,onChange:e=>{c(e.target.value)},onSet:()=>{t(i)}});return a.createElement("div",null,a.createElement("div",null,"The GraphQL endpoint to connect to:"),a.createElement("input",{type:"text",value:n,onChange:e=>{o(e.target.value)},style:{width:"50%",marginBottom:"10px"}}),a.createElement("div",null,"The following methods require a valid auth token set in the header as a bearer token:"),Z,a.createElement("div",{style:{marginTop:"40px"}}),a.createElement("h3",null,"Get the wallet IDs and check the balances"),a.createElement("div",null,"Can run this query at any stage to confirm the change in the balances."),a.createElement("div",null,'The "BTC" wallet balance is denominated in satoshis.'),a.createElement("div",null,'The "USD" wallet balance is in cents.'),a.createElement("div",{style:{marginTop:"20px"}}),a.createElement("div",null,"The body of the GraphQL request:"),a.createElement("pre",{style:{marginLeft:"10px"}},B),a.createElement("button",{onClick:async()=>{try{const t=await(0,r.K)(e,n,B);P(t);const a=t?.me?.defaultAccount?.wallets?.find((e=>"BTC"===e.walletCurrency));a?.id&&m(a.id),Q(B,"wallet")}catch(t){U(t.message)}}},"Send the request"),D&&a.createElement("div",{style:{color:"red"}},"Error: ",D),x&&a.createElement("div",null,a.createElement("strong",null,"Response:")," ",a.createElement("pre",{style:{marginLeft:"10px"}},JSON.stringify(x,null,2))),a.createElement("div",{style:{marginTop:"20px",marginBottom:"40px"}},a.createElement("h4",null,"cURL command to get the USD wallet ID:"),a.createElement("pre",{style:{backgroundColor:"auto",padding:"10px",marginLeft:"10px",overflowX:"auto",whiteSpace:"pre-wrap"}},h)),a.createElement("h3",null,"Generate a Stablesats invoice"),a.createElement("div",null,"Using Stablesats a merchant can generate invoices denominated in USD cents."),a.createElement("div",null,"The satoshi amount of the invoice will reflect the current USD/BTC exchange rate and the balance will be kept at the dollar value."),a.createElement("div",{style:{marginTop:"20px"}}),a.createElement("div",null,a.createElement("div",null,a.createElement("div",null," Set the variables:"),a.createElement("label",null,a.createElement("div",null,"Amount (USD cents):"),a.createElement("input",{type:"number",value:s,onChange:e=>{u(e.target.value)},style:{marginLeft:"10px",width:"50%"}}))),a.createElement("label",null,a.createElement("div",null,"USD wallet ID:"),a.createElement("input",{type:"text",value:p,onChange:H,style:{marginLeft:"10px",width:"50%"},placeholder:"Paste the USD wallet ID from the response above"}))),a.createElement("div",{style:{marginTop:"20px"}}),a.createElement("div",null,"The body of the GraphQL request:"),a.createElement("pre",{style:{marginLeft:"10px"}},G),a.createElement("button",{onClick:async()=>{const t=X(),a={input:{amount:s.toString(),walletId:p}};try{const l=await(0,r.K)(e,n,t,a);C(l),Q(t,"invoice")}catch(l){j(l.message)}}},"Create a Stablesats invoice"),q&&a.createElement("div",{style:{color:"red"}},"Error: ",q),T&&a.createElement("div",null,a.createElement("strong",null,"Response:")," ",a.createElement("pre",{style:{marginLeft:"10px"}},JSON.stringify(T,null,2))),a.createElement("div",{style:{marginTop:"20px",marginBottom:"40px"}},a.createElement("h4",null,"cURL command to generate a Stablesats invoice:"),a.createElement("pre",{style:{backgroundColor:"auto",padding:"10px",marginLeft:"10px",overflowX:"auto",whiteSpace:"pre-wrap"}},g)),a.createElement("h3",null,"Probe invoice fee"),a.createElement("div",null),a.createElement("div",{style:{marginTop:"20px"}}),a.createElement("div",null,a.createElement("div",null," Set the variables:"),a.createElement("div",null,a.createElement("label",null,a.createElement("div",null,"Payment Request:"),a.createElement("input",{type:"text",value:d,onChange:e=>v(e.target.value),style:{marginLeft:"10px",width:"50%"},placeholder:"Paste an invoice"}))),a.createElement("label",null,a.createElement("div",null,"USD wallet ID:"),a.createElement("input",{type:"text",value:p,onChange:H,style:{marginLeft:"10px",width:"50%"},placeholder:"Paste the USD wallet ID from the response above"}))),a.createElement("div",null,"The body of the GraphQL request:"),a.createElement("pre",{style:{marginLeft:"10px"}},_),a.createElement("button",{onClick:async()=>{const t=J(),a={input:{paymentRequest:d,walletId:p}};try{const l=await(0,r.K)(e,n,t,a);O(l),Q(t,"feeProbe",d,p)}catch(l){A(l.message)}}},"Probe fee"),R&&a.createElement("div",{style:{color:"red"}},"Error: ",R),k&&a.createElement("div",null,a.createElement("strong",null,"Response:")," ",a.createElement("pre",{style:{marginLeft:"10px"}},JSON.stringify(k,null,2))),a.createElement("div",{style:{marginTop:"20px",marginBottom:"40px"}},a.createElement("h4",null,"cURL command to probe invoice fee:"),a.createElement("pre",{style:{backgroundColor:"auto",padding:"10px",marginLeft:"10px",overflowX:"auto",whiteSpace:"pre-wrap"}},E)),a.createElement("h3",null,"Pay an invoice"),a.createElement("div",null,a.createElement("div",null," Set the variables:"),a.createElement("div",null,a.createElement("label",null,a.createElement("div",null,"Payment Request:"),a.createElement("input",{type:"text",value:d,onChange:e=>v(e.target.value),style:{marginLeft:"10px",width:"50%"},placeholder:"Paste an invoice"}))),a.createElement("label",null,a.createElement("div",null,"USD wallet ID:"),a.createElement("input",{type:"text",value:p,onChange:H,style:{marginLeft:"10px",width:"50%"},placeholder:"Paste the USD wallet ID from the response above"}))),a.createElement("div",null,"The body of the GraphQL request:"),a.createElement("pre",{style:{marginLeft:"10px"}},K),a.createElement("button",{onClick:async()=>{const t=M(),a={input:{paymentRequest:d,walletId:p}};try{const l=await(0,r.K)(e,n,t,a);I(l),Q(t,"lnInvoicePaymentSend",d,p)}catch(l){$(l.message)}}},"Send payment"),N&&a.createElement("div",{style:{color:"red"}},"Error: ",N),L&&a.createElement("div",null,a.createElement("strong",null,"Response:")," ",a.createElement("pre",{style:{marginLeft:"10px"}},JSON.stringify(L,null,2))),a.createElement("div",{style:{marginTop:"20px",marginBottom:"40px"}},a.createElement("h4",null,"cURL command to pay an invoice:"),a.createElement("pre",{style:{backgroundColor:"auto",padding:"10px",marginLeft:"10px",overflowX:"auto",whiteSpace:"pre-wrap"}},w)))}},7900:(e,t,n)=>{n.d(t,{K:()=>a});const a=async function(e,t,n,a){if(void 0===a&&(a={}),!e)throw new Error("Not authenticated");if(!n)throw new Error("No GraphQL query provided");try{const r=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`bearer ${e}`},body:JSON.stringify({query:n,variables:a})});if(!r.ok){const e=await r.text();throw new Error(`Error response from server: ${e}`)}const l=r.headers.get("content-type");if(l&&l.includes("application/json")){return await r.json()}throw new Error(`Unexpected content type: ${l}`)}catch(r){throw console.error("There was an error making the authenticated request:",r),r}}},38:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>v,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=n(7462),r=(n(7294),n(3905)),l=n(4746),o=n(5690);const i={id:"api-stablesats",title:"Send and receive Stablesats",slug:"/api/stablesats"},c=void 0,s={unversionedId:"api/api-stablesats",id:"api/api-stablesats",title:"Send and receive Stablesats",description:"By default the calls are directed to the staging environment, where the funds are worthless, using the default bitcoin signet.",source:"@site/docs/api/b-stablesats.md",sourceDirName:"api",slug:"/api/stablesats",permalink:"/api/stablesats",draft:!1,tags:[],version:"current",frontMatter:{id:"api-stablesats",title:"Send and receive Stablesats",slug:"/api/stablesats"},sidebar:"apiSidebar",previous:{title:"Get an authentication token",permalink:"/api/auth"},next:{title:"Send and receive satoshis",permalink:"/api/sats"}},u={},p=[],m={toc:p},d="wrapper";function v(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"By default the calls are directed to the staging environment, where the funds are worthless, using the default bitcoin ",(0,r.kt)("a",{parentName:"p",href:"/deployment/signet"},"signet"),".")),(0,r.kt)(l.H,{mdxType:"AuthProvider"},(0,r.kt)(o.Z,{mdxType:"AuthRequestUsdButton"})))}v.isMDXComponent=!0}}]);