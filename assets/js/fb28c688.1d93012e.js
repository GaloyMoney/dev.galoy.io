"use strict";(self.webpackChunkdev_galoy_io=self.webpackChunkdev_galoy_io||[]).push([[866],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>h});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=r.createContext({}),u=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},s=function(e){var n=u(e.components);return r.createElement(p.Provider,{value:n},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),c=u(t),m=a,h=c["".concat(p,".").concat(m)]||c[m]||d[m]||i;return t?r.createElement(h,o(o({ref:n},s),{},{components:t})):r.createElement(h,o({ref:n},s))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=m;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l[c]="string"==typeof e?e:a,o[1]=l;for(var u=2;u<i;u++)o[u]=t[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},475:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>u});var r=t(7462),a=(t(7294),t(3905));const i={id:"public-api",title:"Public API",slug:"/products/public-api"},o="Public API",l={unversionedId:"products/public-api",id:"products/public-api",title:"Public API",description:"* Find the staging API endpoint and graphQL playground at:",source:"@site/docs/products/a-public-api.md",sourceDirName:"products",slug:"/products/public-api",permalink:"/products/public-api",draft:!1,tags:[],version:"current",frontMatter:{id:"public-api",title:"Public API",slug:"/products/public-api"},sidebar:"productsSidebar",previous:{title:"Quickstart",permalink:"/products/"},next:{title:"Stablesats",permalink:"/products/stablesats"}},p={},u=[{value:"Galoy API Tutorial",id:"galoy-api-tutorial",level:3},{value:"Overview",id:"overview",level:3},{value:"Authentication",id:"authentication",level:3},{value:"Curl requests",id:"curl-requests",level:3},{value:"userRequestAuthCode",id:"userrequestauthcode",level:4},{value:'userLogin <a href="#userlogin" id="userlogin"></a>',id:"userlogin-",level:4},{value:'lnInvoiceCreate <a href="#lninvoicecreate" id="lninvoicecreate"></a>',id:"lninvoicecreate-",level:4},{value:'lnInvoiceFeeProbe <a href="#lninvoicefeeprobe" id="lninvoicefeeprobe"></a>',id:"lninvoicefeeprobe-",level:4},{value:'lnInvoicePaymentSend <a href="#lninvoicepaymentsend" id="lninvoicepaymentsend"></a>',id:"lninvoicepaymentsend-",level:4},{value:"Postman collection",id:"postman-collection",level:2},{value:"Videos",id:"videos",level:2},{value:"Using the Galoy GraphQL API - 2022-Oct-26",id:"using-the-galoy-graphql-api---2022-oct-26",level:3},{value:"Getting started with the Galoy API - 2022-Mar-29",id:"getting-started-with-the-galoy-api---2022-mar-29",level:3}],s={toc:u},c="wrapper";function d(e){let{components:n,...t}=e;return(0,a.kt)(c,(0,r.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"public-api"},"Public API"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"Find the staging API endpoint and graphQL playground at:"),(0,a.kt)("p",{parentName:"li"},"  ",(0,a.kt)("a",{parentName:"p",href:"https://api.staging.galoy.io/graphql"},"https://api.staging.galoy.io/graphql")))),(0,a.kt)("h3",{id:"galoy-api-tutorial"},"Galoy API Tutorial"),(0,a.kt)("h3",{id:"overview"},"Overview"),(0,a.kt)("p",null,"The staging API endpoint is: ",(0,a.kt)("inlineCode",{parentName:"p"},"https://api.staging.galoy.io/graphql")),(0,a.kt)("h3",{id:"authentication"},"Authentication"),(0,a.kt)("p",null,"To get a new auth token:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Use ",(0,a.kt)("inlineCode",{parentName:"li"},"userRequestAuthCode")," with email to receive an auth code via email"),(0,a.kt)("li",{parentName:"ol"},"Call ",(0,a.kt)("inlineCode",{parentName:"li"},"userLogin")," using the same phone number and auth code")),(0,a.kt)("p",null,"All other methods require a valid auth token set in the header as a bearer token - ",(0,a.kt)("inlineCode",{parentName:"p"},"Authorization: Bearer")),(0,a.kt)("h3",{id:"curl-requests"},"Curl requests"),(0,a.kt)("h4",{id:"userrequestauthcode"},"userRequestAuthCode"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'export URI=https://api.staging.galoy.io/graphql\nexport EMAIL=\'vd5a05rp@duck.com\'\ncurl --location --request POST $URI --header \'Content-Type: application/json\' --data-raw \'{"query":"mutation userRequestAuthCode ($input: UserRequestAuthCodeInput!) {\\n    userRequestAuthCode (input: $input) {\\n        errors {\\n            message\\n            path\\n        }\\n        success\\n    }\\n}","variables":{"input":{"email":"\'"$EMAIL"\'"}}}\'\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"response")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n    "data": {\n        "userRequestAuthCode": {\n            "errors": [],\n            "success": true\n        }\n    }\n}\n')),(0,a.kt)("h4",{id:"userlogin-"},"userLogin ",(0,a.kt)("a",{href:"#userlogin",id:"userlogin"})),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"query")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'export CODE=\'012345\'\ncurl --location --request POST $URI --header \'Content-Type: application/json\' --data-raw \'{"query":"mutation userLogin ($input: UserLoginInput!) {\\n    userLogin (input: $input) {\\n        errors {\\n            message\\n            path\\n        }\\n        authToken\\n    }\\n}","variables":{"input":{"phone":"\'"$PHONE"\'","code":"\'"$CODE"\'"}}}\'\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"response")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n    "data": {\n        "userLogin": {\n            "errors": [],\n            "authToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiI1ZjkwMTY3ODM2MmZmNjIzMjVkZmFmYjciLCJuZXR3b3JrIjoicmVndGVzdCIsImN1cnJlbmN5IjoiQlRDIiwiaWF0IjoxNjAzMjc4NDU2fQ.-im7fJS_andM32zNXDVqSDPPoQtCtCE22X-hUclT3u0"\n        }\n    }\n}\n')),(0,a.kt)("h4",{id:"lninvoicecreate-"},"lnInvoiceCreate ",(0,a.kt)("a",{href:"#lninvoicecreate",id:"lninvoicecreate"})),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"query")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'export AUTH_TOKEN=\'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1aWQiOiI1ZjkwMTY3ODM2MmZmNjIzMjVkZmFmYjciLCJuZXR3b3JrIjoicmVndGVzdCIsImN1cnJlbmN5IjoiQlRDIiwiaWF0IjoxNjAzMjc4NDU2fQ.-im7fJS_andM32zNXDVqSDPPoQtCtCE22X-hUclT3u0\'\nexport AMOUNT=12345\nexport MEMO=\'tipping\'\ncurl --location --request POST $URI --header "$AUTH_TOKEN" --header \'Content-Type: application/json\' --data-raw \'{"query":"mutation lnInvoiceCreate ($input: LnInvoiceCreateInput!) {\\n    lnInvoiceCreate (input: $input) {\\n        errors {\\n            message\\n            path\\n        }\\n        invoice {\\n            paymentRequest\\n            paymentHash\\n            paymentSecret\\n            satoshis\\n        }\\n    }\\n}","variables":{"input":{"amount":"\'"$AMOUNT"\'","memo":"\'"$MEMO"\'"}}}\'\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"response")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n    "data": {\n        "lnInvoiceCreate": {\n            "errors": [],\n            "invoice": {\n                "paymentRequest": "lntb123450n1pscxulepp59x872uskmr0a4r3wnr3vkmr297zm53smw8j4efevpknuwm8vs5yqdq5w35hqurfdenjq6nsdamscqzpuxqyz5vqsp5yzmznk5z7xszkgfk5xstuh8j5gg4srerelv58pph5wjan2kd8rqs9qyyssqe5l376x893374kqsr5lc8tesudg4jryaqlzmx44mfr87nds83margfa09ggd92sy0rudl6r79sat4rxqml5yfdhmm7yk9jc0ugzw7hgpdfxfzk",\n                "paymentHash": "298be57216d8dfda8e2e88e2cb6c6a2f85ba461b71e55ca72c0da7c76cec8508",\n                "paymentSecret": "20b629da82f1a02b2136a1a0be5cf2a211580f23cfd8438437a3a5d9aacd38c1",\n                "satoshis": 12345\n            }\n        }\n    }\n}\n')),(0,a.kt)("h4",{id:"lninvoicefeeprobe-"},"lnInvoiceFeeProbe ",(0,a.kt)("a",{href:"#lninvoicefeeprobe",id:"lninvoicefeeprobe"})),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"query")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'export PAYMENT_REQUEST=\'lntb123450n1pscxulepp59x872uskmr0a4r3wnr3vkmr297zm53smw8j4efevpknuwm8vs5yqdq5w35hqurfdenjq6nsdamscqzpuxqyz5vqsp5yzmznk5z7xszkgfk5xstuh8j5gg4srerelv58pph5wjan2kd8rqs9qyyssqe5l376x893374kqsr5lc8tesudg4jryaqlzmx44mfr87nds83margfa09ggd92sy0rudl6r79sat4rxqml5yfdhmm7yk9jc0ugzw7hgpdfxfzk\'\ncurl --location --request POST $URI --header "$AUTH_TOKEN" --header \'Content-Type: application/json\' --data-raw \'{"query":"mutation lnInvoiceFeeProbe ($input: LnInvoiceFeeProbeInput!) {\\n    lnInvoiceFeeProbe (input: $input) {\\n        errors {\\n            message\\n            path\\n        }\\n        amount\\n    }\\n}","variables":{"input":{"paymentRequest":"\'"$PAYMENT_REQUEST"\'"}}}\'\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"response")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n    "data": {\n        "lnInvoiceFeeProbe": {\n            "errors": [],\n            "amount": 0\n        }\n    }\n}\n')),(0,a.kt)("h4",{id:"lninvoicepaymentsend-"},"lnInvoicePaymentSend ",(0,a.kt)("a",{href:"#lninvoicepaymentsend",id:"lninvoicepaymentsend"})),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"query")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'PAYMENT_REQUEST=\'lntb50u1psc8xeppp5yryt4j8ve0pvyunrp3dr0l5tj0ss4hnkuxz52hldc9nz2njpe2fqdqqxqrrss9qy9qsqsp5xduj0a8u2c7mn959045wnu8xrv63vqye2d2zw3kllahdv47np6qsrzjqwfn3p9278ttzzpe0e00uhyxhned3j5d9acqak5emwfpflp8z2cng85uzyqqqdsqqqqqqqlgqqqqqeqqjqjwcuu47akd6qggafxy403zk9f67xh86huv6r0fkngvkuwrxuadv8dd3u5gfeurshh3q6jr5jvu05z7f63xz5ac8v4pk3tjfv46jt5dcprr9d4z\'\ncurl --location --request POST $URI --header "$AUTH_TOKEN" --header \'Content-Type: application/json\' --data-raw \'{"query":"mutation lnInvoicePaymentSend ($input: LnInvoicePaymentInput!) {\\n    lnInvoicePaymentSend (input: $input) {\\n        errors {\\n            message\\n            path\\n        }\\n        status\\n    }\\n}","variables":{"input":{"paymentRequest":"\'"$PAYMENT_REQUEST"\'","memo":"\'"$MEMO"\'"}}}\'\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"response")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'{\n    "data": {\n        "lnInvoicePaymentSend": {\n            "errors": [],\n            "status": "ALREADY_PAID"\n        }\n    }\n}\n')),(0,a.kt)("h2",{id:"postman-collection"},(0,a.kt)("a",{parentName:"h2",href:"https://github.com/GaloyMoney/galoy/tree/main/docs/postman-collection"},"Postman collection")),(0,a.kt)("p",null,"If you use Postman, we have a collection you can import to test the API."),(0,a.kt)("p",null,"Download it here: ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/GaloyMoney/galoy/blob/main/docs/postman-collection/galoy_graphql_main_api.postman_collection.json"},"Lightning Integration.postman","_","collection.json")),(0,a.kt)("h2",{id:"videos"},"Videos"),(0,a.kt)("h3",{id:"using-the-galoy-graphql-api---2022-oct-26"},"Using the Galoy GraphQL API - 2022-Oct-26"),(0,a.kt)("p",null,"Arvin demoes the Galoy GraphQL API"),(0,a.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/RRdpKnFe8qQ",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,a.kt)("h3",{id:"getting-started-with-the-galoy-api---2022-mar-29"},"Getting started with the Galoy API - 2022-Mar-29"),(0,a.kt)("p",null,"Arvin walks through how to use the Galoy API to send USD over Lightning."),(0,a.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/bp5Dc6Wvnbw",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}))}d.isMDXComponent=!0}}]);